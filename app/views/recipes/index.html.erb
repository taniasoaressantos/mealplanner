<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h1>Recipe Suggestions</h1>

      <%= form_with url: suggestions_recipes_path, method: :get, local: true, class: 'mb-4' do |form| %>
        <div class="form-group">
          <label for="ingredients">Ingredients (comma separated):</label>
          <input type="text" name="ingredients" id="ingredients" class="form-control" value="<%= params[:ingredients] %>">
        </div>
        <div class="form-group">
          <label for="limit">Limit:</label>
          <input type="number" name="limit" id="limit" class="form-control" value="<%= params[:limit] || 10 %>">
        </div>
        <div class="form-group">
          <label for="max_cook_time">Max Cook Time (in minutes):</label>
          <input type="number" name="max_cook_time" id="max_cook_time" class="form-control" min="1" value="<%= params[:max_cook_time] %>">
        </div>
        <div class="form-group">
          <label for="max_prep_time">Max Prep Time (in minutes):</label>
          <input type="number" name="max_prep_time" id="max_prep_time" class="form-control" min="1" value="<%= params[:max_prep_time] %>">
        </div>
        <div class="form-group">
          <label for="min_rating">Minimum Rating (1-5):</label>
          <input type="number" name="min_rating" id="min_rating" class="form-control" min="1" max="5" step="0.5" value="<%= params[:min_rating] %>">
        </div>
        <button type="submit" class="btn btn-primary">Get Suggestions</button>
      <% end %>

      <% if @recipes.present? %>
        <h2>Suggested Recipes</h2>
        <ul class="list-group mb-4">
          <% @recipes.each do |recipe| %>
            <li class="list-group-item">
              <%= link_to recipe.title, recipe_path(recipe) %> (Matched Ingredients: <%= recipe.match_count %>)
            </li>
          <% end %>
        </ul>
      <% else %>
        <p>No suggestions found.</p>
      <% end %>
    </div>

    <div class="col-md-6">
      <h1>All Recipes</h1>

      <% if @initial_recipes.present? %>
        <ul id="recipe-list" class="list-group mb-4">
          <% @initial_recipes.each do |recipe| %>
            <li class="list-group-item"><%= link_to recipe.title, recipe_path(recipe) %></li>
          <% end %>
        </ul>

        <button id="show-all-recipes" class="btn btn-secondary" onclick="showAllRecipes()">Show All Recipes</button>

        <ul id="all-recipes" class="list-group" style="display: none;">
          <% @all_recipes.each do |recipe| %>
            <li class="list-group-item"><%= link_to recipe.title, recipe_path(recipe) %></li>
          <% end %>
        </ul>
      <% else %>
        <p>No recipes found.</p>
      <% end %>
    </div>
  </div>
</div>

<script>
  function showAllRecipes() {
    document.getElementById('recipe-list').style.display = 'none';
    document.getElementById('show-all-recipes').style.display = 'none';
    document.getElementById('all-recipes').style.display = 'block';
  }
</script>
