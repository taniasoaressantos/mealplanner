<div class="container mt-4">
  <h1>Recipe Suggestions</h1>

  <%= form_with url: suggestions_recipes_path, method: :get, local: true, class: 'mb-4' do %>
    <div class="form-group">
      <label for="ingredients">Ingredients (comma separated):</label>
      <input type="text" name="ingredients" id="ingredients" class="form-control" value="<%= params[:ingredients] %>">
    </div>
    <div class="form-group">
      <label for="limit">Limit:</label>
      <input type="number" name="limit" id="limit" value="<%= params[:limit] || 10 %>" class="form-control">
    </div>
    <div class="form-group">
      <label for="max_cook_time">Max Cook Time (in minutes):</label>
      <input type="number" name="max_cook_time" id="max_cook_time" class="form-control" min="1" value="<%= params[:max_cook_time] %>">
    </div>
    <div class="form-group">
      <label for="max_prep_time">Max Prep Time (in minutes):</label>
      <input type="number" name="max_prep_time" id="max_prep_time" class="form-control" min="1" value="<%= params[:max_prep_time] %>">
    </div>
    <div class="form-group">
      <label for="min_rating">Minimum Rating (1-5):</label>
      <input type="number" name="min_rating" id="min_rating" class="form-control" min="1" max="5" step="0.5" value="<%= params[:min_rating] %>">
    </div>
    <div class="form-group">
    <label for="sort">Sort by:</label>
      <select name="sort" id="sort" class="form-control">
        <option value="rating" <%= 'selected' if params[:sort] == 'rating' %>>Rating</option>
        <option value="prep_time" <%= 'selected' if params[:sort] == 'prep_time' %>>Prep Time</option>
        <option value="cook_time" <%= 'selected' if params[:sort] == 'cook_time' %>>Cook Time</option>
      </select>
    </div>
    <button type="submit" class="btn btn-primary">Get Suggestions</button>
  <% end %>

  <% if @recipes.present? %>
    <h2>Suggested Recipes</h2>
    <ul class="list-group mb-4">
      <% @recipes.each do |recipe| %>
        <li class="list-group-item">
          <%= link_to recipe.title, recipe_path(recipe), class: "recipe-link" %>
          <div><strong>Prep Time:</strong> <%= recipe.prep_time_min %> minutes</div>
          <div><strong>Cook Time:</strong> <%= recipe.cook_time_min %> minutes</div>
          <div><strong>Rating:</strong> <%= recipe.rating %>/5</div>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No suggestions found.</p>
  <% end %>
</div>
